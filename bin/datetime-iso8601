#!/usr/bin/env bash
# vim: set et sw=4 ts=4:

set -e
set -u

if command -v gdate &> /dev/null; then
    DATE=gdate
else
    DATE=date
fi

if [ $# -gt 0 ]; then
    X="-d @$1"
    P=${P:-seconds}
else
    X=""
    P=${P:-ns}
fi

if [[ $P == seconds ]]; then
    R='sed -e ''s/,[0-9]\{1,\}Z/Z/g'''
else
    R=cat
fi

$DATE $X --iso-8601=$P -u | sed -e 's/+00:\{0,1\}00$/Z/g' | $R

